{"ast":null,"code":"var _jsxFileName = \"/Users/aaronmoruf/Desktop/begonia_medical/frontend/src/components/App.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Routes, Route } from 'react-router-dom';\nimport { useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport Navbar from './Reusable/Navbar.tsx';\nimport Login from './Login.tsx';\nimport Register from './Register.tsx';\nimport Inventory from './Inventory/Inventory.tsx';\nimport Purchases from './Purchases/Purchases.tsx';\nimport Invoices from './Invoice/Invoices.tsx';\nimport Services from './Services/Services.tsx';\nimport Reports from './Reports/Reports.tsx';\nimport InventoryProvider from './SharedStates/InventoryProvider.tsx';\nimport { jwtDecode } from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  // if user doesn't have token, send them to login page\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      if (location.pathname !== '/register') {\n        navigate('/login');\n      }\n    } else {\n      // if user's token expires, make sure to remove it from local storage so they can be sent to login page\n      const decodedToken = jwtDecode(token);\n      if (!decodedToken.exp) {\n        throw new Error('Token has no expiration');\n      }\n      const currentTime = Date.now() / 1000;\n      if (decodedToken.exp < currentTime) {\n        localStorage.removeItem('token');\n        navigate('/login');\n      }\n    }\n  }, [navigate]);\n  return /*#__PURE__*/_jsxDEV(InventoryProvider, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-container\",\n      children: [location.pathname !== \"/login\" && location.pathname !== \"/register\" && /*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 90\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"main-content\",\n        children: /*#__PURE__*/_jsxDEV(Routes, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/login\",\n            element: /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 55\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/register\",\n            element: /*#__PURE__*/_jsxDEV(Register, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 58\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/inventory\",\n            element: /*#__PURE__*/_jsxDEV(Inventory, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 59\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/purchases\",\n            element: /*#__PURE__*/_jsxDEV(Purchases, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 59\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/invoices\",\n            element: /*#__PURE__*/_jsxDEV(Invoices, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 58\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/services\",\n            element: /*#__PURE__*/_jsxDEV(Services, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 58\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/reports\",\n            element: /*#__PURE__*/_jsxDEV(Reports, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 57\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n};\n_s(App, \"fPjCxODVr6jVvib6o2c9VLE4s84=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","Routes","Route","useEffect","useNavigate","useLocation","Navbar","Login","Register","Inventory","Purchases","Invoices","Services","Reports","InventoryProvider","jwtDecode","jsxDEV","_jsxDEV","App","_s","location","navigate","token","localStorage","getItem","pathname","decodedToken","exp","Error","currentTime","Date","now","removeItem","children","className","fileName","_jsxFileName","lineNumber","columnNumber","path","element","_c","$RefreshReg$"],"sources":["/Users/aaronmoruf/Desktop/begonia_medical/frontend/src/components/App.tsx"],"sourcesContent":["import React from 'react';\nimport { Routes, Route} from 'react-router-dom';\nimport { useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport Navbar from './Reusable/Navbar.tsx';\nimport Login from './Login.tsx';\nimport Register from './Register.tsx';\nimport Inventory from './Inventory/Inventory.tsx';\nimport Purchases from './Purchases/Purchases.tsx';\nimport Invoices from './Invoice/Invoices.tsx'\nimport Services from './Services/Services.tsx'\nimport Reports from './Reports/Reports.tsx'\n\n\n\nimport InventoryProvider from './SharedStates/InventoryProvider.tsx';\nimport { jwtDecode } from 'jwt-decode';\n\n\n\nconst App = () => {\n\n    const location = useLocation();\n    const navigate = useNavigate();\n\n    // if user doesn't have token, send them to login page\n    useEffect(() => {\n        const token = localStorage.getItem('token');\n        if (!token){\n            if (location.pathname !== '/register'){\n                navigate('/login');\n            }\n        } \n        else {\n        // if user's token expires, make sure to remove it from local storage so they can be sent to login page\n            const decodedToken = jwtDecode(token);\n            if (!decodedToken.exp){\n                throw new Error ('Token has no expiration')\n            }\n\n            const currentTime = Date.now()/1000;\n\n            if (decodedToken.exp < currentTime){\n                localStorage.removeItem('token');\n                navigate('/login');\n            }\n        }\n    }, [navigate]);\n\n    return(\n        <InventoryProvider>\n            <div className='app-container'>\n                { location.pathname !== \"/login\" && location.pathname !== \"/register\" && < Navbar/> }\n                <main className='main-content'>\n                <Routes>\n                    <Route path = \"/login\" element = {<Login/>}/>\n                    <Route path = \"/register\" element = {<Register/>}/>\n                    {/* <Route path = \"/\" element = {<h2>Home Page</h2>}/> */}\n                    <Route path = \"/inventory\" element = {<Inventory/>}/>\n                    <Route path = \"/purchases\" element = {<Purchases/>}/>\n                    <Route path = \"/invoices\" element = {<Invoices/>}/>\n                    <Route path = \"/services\" element = {<Services/>}/>\n                    <Route path = \"/reports\" element = {<Reports/>}/>\n                </Routes>\n                </main>\n            </div>\n        </InventoryProvider>\n        \n        \n    )\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}